<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤é¢¨å°ç™½å±‹ - æ™ºæ…§ç¶­ä¿®è¨ºæ–·æ¨¹</title>
    <style>
        :root {
            --primary: #2980b9;
            --secondary: #8e44ad;
            --success: #27ae60;
            --danger: #c0392b;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background: var(--light);
            color: var(--dark);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 700px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }

        header {
            background: var(--dark);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .tabs {
            display: flex;
            cursor: pointer;
            background: #bdc3c7;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            transition: 0.3s;
        }

        .tab.active {
            background: white;
            border-top: 4px solid var(--primary);
        }

        .tab:nth-child(2).active {
            border-top-color: var(--secondary);
        }

        .content-area {
            padding: 30px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .question-box h2 {
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: 0.2s;
            font-weight: bold;
        }

        .btn-yes { background: var(--success); color: white; }
        .btn-no { background: var(--danger); color: white; }
        .btn-reset { background: var(--dark); color: white; margin-top: 20px;}

        button:hover { opacity: 0.9; transform: scale(1.02); }

        .result-box {
            background: #f9f9f9;
            border-left: 5px solid var(--primary);
            padding: 20px;
            text-align: left;
            width: 100%;
        }

        .result-box h3 { color: var(--primary); margin-top: 0;}
        
        .diagram-note {
            font-family: 'Courier New', monospace;
            background: #333;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            font-size: 0.85em;
            white-space: pre-wrap;
        }

        .safety-warning {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            border: 1px solid #ef9a9a;
            border-radius: 4px;
            font-size: 0.9em;
            margin-bottom: 15px;
            display: none; /* Hidden by default */
        }

        /* Animation */
        .fade-in {
            animation: fadeIn 0.4s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>å®¶é›»ç¶­ä¿®è¨ºæ–·æ¨¹</h1>
        <p>å¤é¢¨å°ç™½å±‹å¿—å·¥å°ˆç”¨å·¥å…· v1.0</p>
    </header>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('ricecooker')">ğŸš é›»é‹ç¶­ä¿®</div>
        <div class="tab" onclick="switchTab('microwave')">âš¡ å¾®æ³¢çˆç¶­ä¿® (é«˜å£“æ³¨æ„)</div>
    </div>

    <div class="content-area">
        <div id="safetyBanner" class="safety-warning">
            âš ï¸ <strong>é«˜å£“å±éšªï¼š</strong> å¾®æ³¢çˆç¶­ä¿®å‰è«‹å‹™å¿…æ‹”é™¤æ’é ­ï¼Œä¸¦å°ã€Œé«˜å£“é›»å®¹ã€é€²è¡Œæ”¾é›»ï¼ˆä½¿ç”¨å°–å˜´é‰—çŸ­è·¯é›»å®¹å…©æ¥µï¼‰ã€‚è‹¥ç„¡æŠŠæ¡è«‹å‹¿è§¸ç¢°è®Šå£“å™¨å¾Œç«¯é›»è·¯ã€‚
        </div>
        <div id="dynamicContent" class="fade-in">
            </div>
    </div>
</div>

<script>
    // Data Structure for Logic Trees
    const logicData = {
        ricecooker: {
            start: {
                q: "æ’ä¸Šé›»æºï¼ŒæŒ‰ä¸‹é–‹é—œï¼ŒåŠ ç†±ç‡ˆ(ç´…ç‡ˆ)æœƒäº®å—ï¼Ÿ",
                yes: "light_on",
                no: "light_off"
            },
            light_off: {
                q: "æ¸¬é‡é›»æºç·šå…©ç«¯æ˜¯å¦å°é€šï¼Ÿ(ä¸‰ç”¨é›»è¡¨)",
                yes: "check_fuse",
                no: "fix_cord"
            },
            fix_cord: {
                result: "æ›´æ›é›»æºç·š",
                detail: "é€™æ˜¯æœ€ç°¡å–®çš„å•é¡Œï¼Œé€šå¸¸æ˜¯æ’é ­å…§éƒ¨æ–·è£‚æˆ–ç·šæè€åŒ–ã€‚",
                diagram: "æ’é ­ [æ–·è·¯ X] --- é›»é‹"
            },
            check_fuse: {
                result: "æª¢æŸ¥æº«åº¦ä¿éšªçµ²",
                detail: "æ‹†é–‹åº•è“‹ï¼Œå°‹æ‰¾è¢«ç™½è‰²ç»ç’ƒçº–ç¶­å¥—ç®¡åŒ…ä½çš„å…ƒä»¶ã€‚è‹¥é‡æ¸¬ç‚ºæ–·è·¯ï¼Œè«‹æ›´æ› (é€šå¸¸è¦æ ¼ï¼š10A 250V, 130~150Â°C)ã€‚",
                diagram: "AC --- [ä¿éšªçµ²] --- é–‹é—œ"
            },
            light_on: {
                q: "ç‡ˆäº®ï¼Œä½†æ˜¯é‹å­å®Œå…¨ä¸ç†±ï¼Ÿ",
                yes: "check_heater",
                no: "cooking_issue"
            },
            check_heater: {
                result: "æª¢æŸ¥é›»ç†±ç‰‡æˆ–ä¸»é–‹é—œæ¥é»",
                detail: "1. æª¢æŸ¥ä¸»é–‹é—œæ¥é»æ˜¯å¦ç©ç¢³æ°§åŒ–å°è‡´æ¥è§¸ä¸è‰¯ (ç”¨ç ‚ç´™æ‰“ç£¨)ã€‚\n2. é‡æ¸¬é›»ç†±ç‰‡é˜»å€¼ï¼Œè‹¥ç‚ºç„¡çª®å¤§å‰‡é›»ç†±ç›¤ç‡’æ¯€ (å»ºè­°å ±å»¢)ã€‚",
                diagram: "é–‹é—œ [X] --- é›»ç†±ç‰‡"
            },
            cooking_issue: {
                q: "é£¯ç…®ä¸ç†Ÿå°±è·³èµ·ä¾† (å¤ªæ—©è·³)ï¼Œæˆ–æ˜¯ç…®ç„¦äº†é‚„ä¸è·³ï¼Ÿ",
                yes: "sensor_issue",
                no: "warm_issue"
            },
            sensor_issue: {
                result: "æ›´æ›/èª¿æ•´ç£é‹¼é™æº«å™¨",
                detail: "1. å¤ªæ—©è·³ï¼šç£é‹¼ç£åŠ›è¡°é€€ï¼Œéœ€æ›´æ›ä¸­æ¿ç£é‹¼çµ„ã€‚\n2. ä¸è·³ï¼šé€£æ¡¿æ©Ÿæ§‹å¡æ­»æˆ–ç•°ç‰©æ²¾é»ï¼Œæ¸…æ½”æ´»å‹•éƒ¨ä½ã€‚",
                diagram: "å…§é‹æº«åº¦ > 100Â°C -> ç£é‹¼å¤±ç£ -> å½ˆç°§å½ˆé–‹"
            },
            warm_issue: {
                result: "æª¢æŸ¥ä¿æº«ç‰‡",
                detail: "è‹¥ä¸»åŠ ç†±æ­£å¸¸ä½†ç„¡æ³•ä¿æº«ï¼Œæª¢æŸ¥ä¸¦è¯çš„ä¿æº«é›»ç†±ç‰‡æˆ–ä¿æº«é›»é˜»æ˜¯å¦æ–·è·¯ã€‚",
                diagram: "ä¸»é–‹é—œ(æ–·) -> é›»æµèµ°ä¿æº«è·¯å¾‘"
            }
        },
        microwave: {
            start: {
                q: "æ’é›»å¾Œï¼Œé¢æ¿é¡¯ç¤ºç‡ˆæœ‰äº®å—ï¼Ÿ",
                yes: "panel_on",
                no: "power_dead"
            },
            power_dead: {
                result: "æª¢æŸ¥ä¸»ä¿éšªçµ² (ä½å£“å´)",
                detail: "ä½æ–¼é›»æºç·šå…¥å£è™•çš„ç»ç’ƒç®¡ä¿éšªçµ² (é€šå¸¸ 10A-15A)ã€‚è‹¥ç‡’é»‘ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰é–€é–‹é—œçŸ­è·¯æˆ–å…ƒä»¶çŸ­è·¯ã€‚",
                diagram: "AC --- [FUSE] --- é›»è·¯æ¿"
            },
            panel_on: {
                q: "è¨­å®šæ™‚é–“å•Ÿå‹•å¾Œï¼Œç‡ˆæœƒäº®ã€ç›¤æœƒè½‰ï¼Œä½†ã€Œå®Œå…¨ä¸ç†±ã€ï¼Ÿ",
                yes: "hv_check",
                no: "weird_noise"
            },
            weird_noise: {
                q: "é‹è½‰æ™‚æœ‰ç•°å¸¸å¤§çš„ã€Œè½Ÿè½Ÿã€è²æˆ–æ‰“ç«èŠ±ï¼Ÿ",
                yes: "sparking",
                no: "door_issue"
            },
            door_issue: {
                result: "æª¢æŸ¥é–€å¾®å‹•é–‹é—œ (Interlocks)",
                detail: "æœ€å¸¸è¦‹æ•…éšœï¼å¾®æ³¢çˆæœ‰3å€‹å¾®å‹•é–‹é—œ (ä¸»é–ã€ç›£æ§é–ã€æ„Ÿæ‡‰é–)ã€‚è‹¥æ¥é»æ°§åŒ–æˆ–å¡‘è† å¡æ¦«ç£¨æï¼Œå¾®æ³¢çˆæœƒé–æ­»ä¸å•Ÿå‹•ã€‚è«‹ä¸€ä¸€æ¸¬é‡é€šæ–·ã€‚",
                diagram: "é–€å‹¾ -> [é–‹é—œA] + [é–‹é—œB] -> å°é€š"
            },
            sparking: {
                result: "æª¢æŸ¥é›²æ¯ç‰‡èˆ‡ç£æ§ç®¡æ§é ­",
                detail: "1. é›²æ¯ç‰‡(çˆå…§å³å´éŠ€è‰²ç‰‡)æ˜¯å¦ç‡’ç„¦æ²¹æ±™ï¼Ÿ(æ›´æ›)\n2. ç£æ§ç®¡ç™¼å°„é ­æ˜¯å¦ç‡’èï¼Ÿ(éœ€æ›´æ›ç£æ§ç®¡)",
                diagram: "å¾®æ³¢å‡ºå£ -> [é›²æ¯ç‰‡] -> çˆè…”"
            },
            hv_check: {
                result: "æª¢æŸ¥é«˜å£“å´ (å±éšªå€)",
                detail: "1. é«˜å£“ä¿éšªçµ² (ç™½è‰²å¡‘è† æ®¼å…§) æ˜¯å¦ç‡’æ–·ï¼Ÿ\n2. é«˜å£“äºŒæ¥µé«”æ˜¯å¦æ“Šç©¿ï¼Ÿ\n3. é«˜å£“é›»å®¹æ˜¯å¦å¤±æ•ˆï¼Ÿ\n4. ç£æ§ç®¡æœ¬èº«æ•…éšœã€‚\n**å‹™å¿…å…ˆæ”¾é›»å†æª¢æ¸¬ï¼**",
                diagram: "è®Šå£“å™¨ -> [é«˜å£“ä¿éšªçµ²] -> [é›»å®¹/äºŒæ¥µé«”] -> ç£æ§ç®¡"
            }
        }
    };

    let currentTab = 'ricecooker';
    let currentNode = 'start';

    function switchTab(tab) {
        currentTab = tab;
        currentNode = 'start';
        
        // UI Update
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab').forEach((t, index) => {
            if ((index === 0 && tab === 'ricecooker') || (index === 1 && tab === 'microwave')) {
                t.classList.add('active');
            }
        });

        // Safety Warning Toggle
        const safetyBanner = document.getElementById('safetyBanner');
        if (tab === 'microwave') {
            safetyBanner.style.display = 'block';
            document.documentElement.style.setProperty('--primary', '#8e44ad'); // Purple for microwave
        } else {
            safetyBanner.style.display = 'none';
            document.documentElement.style.setProperty('--primary', '#2980b9'); // Blue for rice cooker
        }

        render();
    }

    function render() {
        const container = document.getElementById('dynamicContent');
        const data = logicData[currentTab][currentNode];
        
        // Remove animation class to re-trigger it
        container.classList.remove('fade-in');
        void container.offsetWidth; // trigger reflow
        container.classList.add('fade-in');

        if (data.q) {
            // Question State
            container.innerHTML = `
                <div class="question-box">
                    <h2>ğŸ¤” ${data.q}</h2>
                    <div class="btn-group">
                        <button class="btn-yes" onclick="next('${data.yes}')">æ˜¯ (Yes)</button>
                        <button class="btn-no" onclick="next('${data.no}')">å¦ (No)</button>
                    </div>
                </div>
            `;
        } else {
            // Result State
            container.innerHTML = `
                <div class="result-box">
                    <h3>ğŸ”§ è¨ºæ–·çµæœï¼š${data.result}</h3>
                    <p>${data.detail.replace(/\n/g, '<br>')}</p>
                    ${data.diagram ? `<div class="diagram-note">é›»è·¯ç¤ºæ„ï¼š\n${data.diagram}</div>` : ''}
                </div>
                <button class="btn-reset" onclick="reset()">ğŸ”„ é‡æ–°è¨ºæ–·</button>
            `;
        }
    }

    function next(nextNodeKey) {
        currentNode = nextNodeKey;
        render();
    }

    function reset() {
        currentNode = 'start';
        render();
    }

    // Initialize
    render();

</script>

</body>
</html>
